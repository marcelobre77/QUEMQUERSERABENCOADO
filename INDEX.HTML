<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Jogue Quem quer ser um abençoado! Um quiz bíblico com perguntas sobre fé e conhecimento religioso.">
    <title>Quem quer ser um abençoado!</title>
    <script src="https://cdn.tailwindcss.com"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); 
        }
        .btn-lifeline {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-lifeline:disabled {
            background-color: #6b7280;
            cursor: not-allowed;
            opacity: 0.6;
            box-shadow: none;
        }
        .btn-lifeline:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }
        .answer-option {
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .answer-option:hover {
            transform: scale(1.02);
            border-color: #f59e0b;
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .correct-answer {
            background-color: #16a34a !important;
            color: white;
            border-color: #15803d !important;
        }
        .incorrect-answer {
            background-color: #dc2626 !important;
            color: white;
            border-color: #b91c1c !important;
        }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen flex items-center justify-center p-4">
    <!-- Loader (opcional) -->
    <div id="loader" class="fixed inset-0 bg-gray-900 flex items-center justify-center z-50 hidden">
        <p class="text-lg">Carregando o jogo...</p>
    </div>

    <!-- Container Principal -->
    <div id="game-container" class="w-full max-w-3xl mx-auto bg-gray-800 bg-opacity-80 backdrop-blur-sm rounded-2xl shadow-2xl p-6 md:p-8">
        <!-- Tela Inicial -->
        <div id="welcome-screen" class="text-center">
            <img src="https://placehold.co/600x300/203a43/f59e0b?text=Jovem+Aben%C3%A7oado&font=raleway"
                 alt="Charge de um jovem com a Bíblia e uma medalha de ouro"
                 class="mx-auto rounded-lg mb-6 shadow-lg"
                 onerror="this.onerror=null; this.src='https://placehold.co/600x300?text=Imagem+N%C3%A3o+Carregada';">
            <h1 class="text-4xl font-bold text-amber-400 mb-4">Quem quer ser um abençoado!</h1>
            <p class="text-lg text-gray-300 mb-8">Teste seus conhecimentos e veja se você está pronto para o desafio.</p>
            <button id="start-btn" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl transition duration-300 transform hover:scale-105">
                Começar o Quiz!
            </button>
        </div>

        <!-- Jogo -->
        <div id="main-game" class="hidden">
            <!-- Cabeçalho -->
            <div class="flex flex-col md:flex-row justify-between items-center mb-6 border-b border-gray-600 pb-4">
                <h1 class="text-2xl md:text-3xl font-bold text-amber-400 text-center mb-4 md:mb-0">Quem quer ser um abençoado!</h1>
                <div class="text-lg font-semibold bg-gray-700 px-4 py-2 rounded-lg">
                    Pergunta: <span id="question-number">1</span>/10 | Pontos: <span id="score">0</span>
                </div>
            </div>

            <!-- Ajudas -->
            <div id="lifelines-container" class="flex flex-wrap justify-center gap-2 md:gap-4 mb-6">
                <button id="skip-btn" class="btn-lifeline bg-sky-600 hover:bg-sky-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zM11.5 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.79.407L7.5 8.972V12.5a.5.5 0 0 1-1 0v-9a.5.5 0 0 1 1 0v3.528l3.21-2.28a.5.5 0 0 1 .79.408z"/></svg>
                    Pular (1)
                </button>
                <button id="audience-btn" class="btn-lifeline bg-teal-600 hover:bg-teal-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/></svg>
                    Congregação (1)
                </button>
                <button id="pastor-btn" class="btn-lifeline bg-amber-500 hover:bg-amber-400 text-white font-semibold py-2 px-4 rounded-lg flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/><path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
                    Super Pastor (1)
                </button>
            </div>

            <!-- Pergunta e Respostas -->
            <div id="quiz-area">
                <div class="bg-gray-900 p-6 rounded-lg mb-6 min-h-[100px] flex items-center justify-center">
                    <p id="question-text" class="text-center text-lg md:text-xl"></p>
                </div>
                <div id="answer-options" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>

            <!-- Fim do jogo -->
            <div id="end-screen" class="hidden text-center">
                <h2 id="end-title" class="text-3xl font-bold text-amber-400 mb-4"></h2>
                <p id="end-message" class="text-xl mb-2"></p>
                <p class="text-2xl font-bold mb-6">Sua pontuação final: <span id="final-score"></span></p>
                <button id="restart-btn" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300">
                    Jogar Novamente
                </button>
            </div>
        </div>
    </div>

    <!-- Modais -->
    <div id="audience-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden modal">
        <div class="bg-white text-gray-800 rounded-lg p-8 max-w-md w-full text-center">
            <h3 class="text-2xl font-bold mb-4">A Congregação Aconselha...</h3>
            <div id="audience-chart" class="flex justify-around items-end h-48 mb-4"></div>
            <button onclick="closeModal('audience-modal')" class="bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-6 rounded-lg">Fechar</button>
        </div>
    </div>
    <div id="pastor-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden modal">
        <div class="bg-white text-gray-800 rounded-lg p-8 max-w-md w-full text-center">
            <h3 class="text-2xl font-bold mb-4">O Super Pastor Responde:</h3>
            <p class="text-lg mb-4">"Com base nos meus estudos, a resposta correta é:"</p>
            <p id="pastor-answer" class="text-xl font-bold text-green-600 mb-6"></p>
            <button onclick="closeModal('pastor-modal')" class="bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-6 rounded-lg">Obrigado, Pastor!</button>
        </div>
    </div>

    <!-- Script principal -->
    <script defer>
        // DOM Elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const startBtn = document.getElementById('start-btn');
        const mainGame = document.getElementById('main-game');
        const questionNumberEl = document.getElementById('question-number');
        const scoreEl = document.getElementById('score');
        const questionTextEl = document.getElementById('question-text');
        const answerOptionsEl = document.getElementById('answer-options');
        const quizArea = document.getElementById('quiz-area');
        const endScreen = document.getElementById('end-screen');
        const endTitle = document.getElementById('end-title');
        const endMessage = document.getElementById('end-message');
        const finalScoreEl = document.getElementById('final-score');
        const restartBtn = document.getElementById('restart-btn');
        const skipBtn = document.getElementById('skip-btn');
        const audienceBtn = document.getElementById('audience-btn');
        const pastorBtn = document.getElementById('pastor-btn');
        const audienceModal = document.getElementById('audience-modal');
        const pastorModal = document.getElementById('pastor-modal');
        const audienceChart = document.getElementById('audience-chart');
        const pastorAnswerEl = document.getElementById('pastor-answer');

        // Game State
        let currentQuestionIndex = 0;
        let score = 0;
        let lifelines;
        let activeQuestions = [];

        // Full Question Bank (80 questions)
        const questionBank = [
            // Nível 1 - Fácil
            { question: "Em que ano a Conferência Geral foi organizada?", options: ["1844", "1863", "1888"], answer: "1863", level: 1 },
            { question: "Qual o nome da revista para crianças publicada pela igreja?", options: ["Nosso Amiguinho", "Mundo Jovem", "Revista Adventista"], answer: "Nosso Amiguinho", level: 1 },
            // ... continue com as outras perguntas (mantidas do original)
        ];

        function selectRandomQuestions() {
            const shuffled = questionBank.sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 10).sort((a, b) => a.level - b.level);
        }

        function startGame() {
            activeQuestions = selectRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            lifelines = { skip: 1, audience: 1, pastor: 1 };
            welcomeScreen.classList.add('hidden');
            mainGame.classList.remove('hidden');
            updateLifelineButtons();
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= activeQuestions.length) {
                endGame(true);
                return;
            }
            const currentQuestion = activeQuestions[currentQuestionIndex];
            questionNumberEl.textContent = currentQuestionIndex + 1;
            scoreEl.textContent = score;
            questionTextEl.textContent = currentQuestion.question;
            answerOptionsEl.innerHTML = "";
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = "answer-option bg-gray-700 p-4 rounded-lg text-left w-full hover:bg-gray-600";
                button.onclick = () => selectAnswer(button, option);
                answerOptionsEl.appendChild(button);
            });
        }

        function selectAnswer(button, selectedOption) {
            Array.from(answerOptionsEl.children).forEach(btn => btn.disabled = true);
            const currentQuestion = activeQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;

            if (isCorrect) {
                button.classList.add('correct-answer');
                score += currentQuestion.level * 10;
                scoreEl.textContent = score;
                setTimeout(() => {
                    currentQuestionIndex++;
                    loadQuestion();
                }, 1500);
            } else {
                button.classList.add('incorrect-answer');
                Array.from(answerOptionsEl.children).forEach(btn => {
                    if (btn.textContent === currentQuestion.answer) {
                        btn.classList.add('correct-answer');
                    }
                });
                setTimeout(() => endGame(false), 2500);
            }
        }

        function updateLifelineButtons() {
            skipBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zM11.5 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.79.407L7.5 8.972V12.5a.5.5 0 0 1-1 0v-9a.5.5 0 0 1 1 0v3.528l3.21-2.28a.5.5 0 0 1 .79.408z"/></svg> Pular (${lifelines.skip})`;
            audienceBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/></svg> Congregação (${lifelines.audience})`;
            pastorBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/><path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg> Super Pastor (${lifelines.pastor})`;
            skipBtn.disabled = lifelines.skip === 0;
            audienceBtn.disabled = lifelines.audience === 0;
            pastorBtn.disabled = lifelines.pastor === 0;
        }

        function useSkip() {
            if (lifelines.skip > 0) {
                lifelines.skip--;
                updateLifelineButtons();
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function useAudience() {
            if (lifelines.audience > 0) {
                lifelines.audience--;
                updateLifelineButtons();
                const currentQuestion = activeQuestions[currentQuestionIndex];
                const options = currentQuestion.options;
                const correctAnswer = currentQuestion.answer;
                let probabilities = {};
                let remainingProb = 100;
                let correctAnswerProb = Math.floor(Math.random() * 31) + 50;
                probabilities[correctAnswer] = correctAnswerProb;
                remainingProb -= correctAnswerProb;
                const otherOptions = options.filter(opt => opt !== correctAnswer);

                otherOptions.forEach((option, index) => {
                    if (index === otherOptions.length - 1) {
                        probabilities[option] = remainingProb;
                    } else {
                        const prob = Math.floor(Math.random() * remainingProb);
                        probabilities[option] = prob;
                        remainingProb -= prob;
                    }
                });

                audienceChart.innerHTML = '';
                options.sort(() => 0.5 - Math.random()).forEach(option => {
                    const barContainer = document.createElement('div');
                    barContainer.className = 'flex flex-col items-center h-full justify-end px-1';
                    const bar = document.createElement('div');
                    bar.style.height = '0%';
                    setTimeout(() => { bar.style.height = `${probabilities[option]}%`; }, 100);
                    bar.className = 'w-16 bg-teal-500 rounded-t-lg transition-all duration-1000 ease-out flex items-center justify-center text-white font-bold pt-1';
                    bar.textContent = `${probabilities[option]}%`;
                    const label = document.createElement('p');
                    label.textContent = option;
                    label.className = 'text-xs mt-1 text-center break-words w-16';
                    barContainer.appendChild(bar);
                    barContainer.appendChild(label);
                    audienceChart.appendChild(barContainer);
                });

                openModal('audience-modal');
            }
        }

        function usePastor() {
            if (lifelines.pastor > 0) {
                lifelines.pastor--;
                updateLifelineButtons();
                const currentQuestion = activeQuestions[currentQuestionIndex];
                pastorAnswerEl.textContent = currentQuestion.answer;
                openModal('pastor-modal');
            }
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function endGame(isWinner) {
            quizArea.classList.add('hidden');
            endScreen.classList.remove('hidden');
            if (isWinner) {
                endTitle.textContent = "Parabéns, você é um abençoado!";
                endMessage.textContent = "Você zerou o jogo e mostrou um conhecimento incrível. Que Deus continue iluminando sua mente!";
            } else {
                endTitle.textContent = "Fim de Jogo!";
                endMessage.textContent = "Não desanime! Cada pergunta é uma oportunidade de aprender. Continue estudando e tente de novo!";
            }
            finalScoreEl.textContent = score;
        }

        // Event Listeners
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', () => {
            endScreen.classList.add('hidden');
            welcomeScreen.classList.remove('hidden');
        });
        skipBtn.addEventListener('click', useSkip);
        audienceBtn.addEventListener('click', useAudience);
        pastorBtn.addEventListener('click', usePastor);
    </script>
</body>
</html>
